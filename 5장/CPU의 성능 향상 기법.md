# CPU의 성능 향상 기법

## 빠른 CPU를 위한 설계 기법

1. 클럭
    - 클럭 속도 : 헤르츠(Hz) 단위로 측정
    - 헤르츠(Hz) : 1초에 클럭이 반복되는 횟수
    - 필요 이상으로 클럭을 높이면 `발열`이 심각해진다.

2. 코어 & 멀티 코어
    - 코어 : `CPU` 내에서 `명령어를 실행하는 부품`
    - 듀얼코어 : `코어`가 2개인 경우
    - 멀티코어 : `여러 개의 코어`를 포함하고 있는 CPU를 뜻한다.

3. 스레드 & 멀티 스레드
    - 스레드
      - 사전적 의미로는 `실행 흐름의 단위`를 뜻한다.
      - `하드웨어적인 스레드`와 `소프트웨어적 스레드`가 존재한다.

    - 하드웨어 스레드 : `하나의 코어`가 `동시에` 처리하는 명령어 단위
      - `논리 프로세서`라고 부른다.

    - 소프트웨어 스레드 : `하나의 프로그램`에서 `독립적`으로 실행되는 단위


--------------------------------------------------------------------------------------------
## 명령어 병렬 처리 기법

1. 명령어 파이프라인
   - 명령어 파이프라인의 단계
      1. 명령어 인출(Instruction Fetch)
      2. 명령어 해석(Instruction Decode)
      3. 명령어 실행(Execute Instruction)      
      4. 결과 저장(Write Back)
   - 같은 단계가 겹치지 않는다면 CPU는 `각 단계를 동시에 실행`할 수 있다.
   - 명령어 파이프라이닝 : 동시에 여러 개의 명령어를 겹처 실행하는 기법

2. 파이프라인 위험 : 명령어 파이프라인이 `성능 향상에 실패`하는 경우
   1. 데이터 위험
      - 명령어 간의 `의존성`에 의해 발생한다.
      - 모든 명령어는 동시에 처리할 수 없다. -> 이전 명령어를 `끝까지 실행`해야만 비로소 실행할 수 있는 경우
   2. 제어 위험
      - 프로그램 카운터의 갑작사러운 변화
      - CPU가 실행하고자 하는 메모리의 주소 번지가 변경(ex. JUMP, Interrupt, ...)
   3. 구조적 위험
      - 서로 다른 명령어가 같은 CPU 부품(ALU, 레지스터)를 쓰려고 할 때

3. 슈퍼스칼라
   - CPU 내부에 `여러 개의 명령 파이프라인`을 포함한 구조
   - 이론적으로는 파이프라인에 개수에 비래하여 처리 속도 증가 -> `파이프라인 위험도` 증가로 인해 증가하지 않는다.

4. 비순차적 명령어 처리
   - 파이프라인의 중단을 방지하기 위해 명령어를 `순차적으로 처리하지 않는 명령어 병렬 처리 기법`이다.
   - 전체 프로그램 실행 흐름에 영향이 없는 경우 `순서를 바꿀 수 있다` 

--------------------------------------------------------------------------------------------
## 명령어 집합 구조, CISC와 RISC


1. 명령어 집합(구조)
    - CPU가 이해할 수 있는 명령어들의 모음
    - ex) 인텔 CPU : x86(x86-64) 명령어 집합, 애플 CPU  : ARM 명령어 집합을 따른다.
    - 명령어가 달라지만 그에 따라 해석 방식, 레지스터의 종류와 개수, 파이프라이닝 등 ...
    - `ISA` : CPU의 언어이자 하드웨어가 소프트웨어를 어떻게 이해할지에 대한 약속이다.

2. CISC (Complex Instruction Set Computer)
   - `복잡한 명령어 집합`을 활용하는 컴퓨터(CPU)
   - `x86`, `x86-64`는 CISC 기반의 명령어 집합 구조

   1. CISC의 특징
      - 복잡하고 다양한 명령어를 활용한다.
      - 명령어 형태와 크기가 다양한 `가변 길이 명령어`를 활용한다.
      - 다양하고 강력한 명령어를 활용한다.
      - 상대적으로 적은 수의 명령어로도 프로그램을 실행할 수 있다.
   2. CISC의 단점
      - `명령어 파이프라이닝이 불리`하다.
      - 명렁어가 복잡하고 다양하기 때문에 `명령어의 크기와 실행되기까지의 시간이 일정하지 않다.`
      - 복잡한 명령어로 인해 `명령어 하나를 실행하는 데에 여러 클럭 주기`가 필요하다.


3. RISC (Reduced Instruction Set Computer)
   - 단순하고 적은 수의 `고정 길이 명령어 집합을 활용`한다.
   - 명령어의 종류가 적고, 짧고 규격화된 명령어를 사용한다.

   1. RISC의 특징
      - 메모리 접근 방식 최소화(`load`, `store`), 레지스터 십분 활용
   2. RISC의 단점
      - 명렁어 종류가 적기 때문에 더 많은 명령어로 프로그램을 동작시킨다.


--------------------------------------------------------------------------------------------
