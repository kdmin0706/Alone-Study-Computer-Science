# 메모리와 캐시 메모리

## RAM의 특징과 종류

1. RAM
    - `휘발성 저장 장치`이다.
    - RAM의 용량과 성능이 좋으면 많은 프로그램들을 동시에 실행하는 데에 유리하다.
2. 보조기억장치
    - `비휘발성 저장 장치`이다.

3. RAM의 종류
    1. DRAM (Dynamic RAM)
      - 저장된 데이터가 `동적으로 사라지는` RAM
      - 데이터 소멸을 막기 위해서 `주기적으로 재활성화` 해야한다.
      - 일반적으로 `메모리`에 사용되는 RAM이다. -> 소비전력이 낮고, 저렴하고 집적도가 높아서 대용량 설계하기 용이하다

    2. SRAM (Static RAM)
      - 저장된 데이터가 `정적인(사라지지 않는)` RAM
      - DRAM 보다 일반적으로 빠르다.
      - 일반적으로 `캐시 메모리`에서 사용되는 RAM이다 -> 대용량으로 설계할 필요가 없으나 빨라야 하는 장치에 사용한다.

    3. SDRAM (Synchronous DRAM)
      - 특별한(발전된 형태의) DRAM
      - `클럭 신호와 동기화`된 DRAM

    4. DDR SRAM (Double Data Rate SDRAM)
      - 특별한(발전된 형태의) SDRAM
      - 최근 가장 `대중적`으로 사용하는 RAM
      - `대역폭`을 넓혀 속도를 빠르게 만든 SDRAM
         - 대역폭 : 데이터를 주고 받는 길의 너비 

--------------------------------------------------------------------------------------------
## 메모리의 주소 공간

1. 물리 주소와 논리 주소
    1. 물리 주소
       - 메모리 입장에서 바라본 주소
       - 실제로 저장된 `하드웨어` 상의 주소
    2. 논리 주소
       - CPU와 실행 중인 프로그램 입장에서 바라본 주소
       - 실행 중인 프로그램 각각에게 부여된 `0번지부터 시작`하는 주소


2. 물리 주소와 논리 주소의 변환
    - `MMU`(메모리 관리 장치) 라고 불리는 하드웨어에 의해 변환된다.
    - `논리 주소`와 `베이스 레지스터`(프로그램 기준 주소) 값을 더하여 논리 주소를 물리 주소로 변환한다.
    1. 베이스 레지스터 : 프로그램의 가장 작은 물리 주소(`프로그램의 첫 물리 주소`)를 저장
    2. 논리 주소 : 프로그램의 시작점으로부터 `떨어진 거리`로 볼 수 있다.

3. 한계 레지스터
    - 프로그램의 영역을 침범할 수 있는 명령어의 실행을 막는다.
    - 베이스 레지스터가 실행 중인 프로그램의 가장 작은 물리주소를 저장한다면
      한계 레지스터는 `논리 주소의 최대 크기를 저장`한다.
    - 베이스 레지스터 <= 프로그램의 물리 주소 범위 < 베이스 레지스터 + 한계 레지스터
    - ex) 베이스 레지스터 100, 한계 레지스터 150이 저장되어 있다면? --> 물리 주소 시작점은 100번지, 프로그램 크기는 150

4. 메모리 보호
    1. CPU는 메모리에 접근하기 전에 접근하고자 하는 논리 주소가 레지스터보다 작은 지 항상 검사한다.
    2. 실행 중인 프로그램의 독립적인 실행 공간을 확보하고, 하나의 프로그램이 다른 프로그램을 침범하지 못하게 보호한다.(= 인터럽트)

 
--------------------------------------------------------------------------------------------
## 캐시 메모리


1. 저장 장치 계층 구조(Memory Hierarchy) : 각기 다른 용량과 성능의 저장 장치들을 계층화 하여 표현한 구조
    1. CPU와 가까운 저장 장치는 빠르고, 멀리 있는 저장 장치는 느리다.
    2. 속도가 빠른 저장 장치는 저장 용량이 작고, 가격이 비싸다.
    3. 낮은 가격대의 대용량 저장장치는 `느린 속도`를 감수해야하고, 빠른 속도의 저장장치를 원하면 `작은 용량`과 `높은 가격`을 감수해야한다.
   
2. 캐시 메모리
    - CPU와 메모리 사이에 위치한 레지스터보다 용량이 크고 메모리보다 빠른 `SRAM 기반`의 저장 장치
    - CPU의 연산 속도와 메모리 접근 속도의 차이를 조금이나마 줄이기 위해 탄생
    - 계층적 캐시 메모리(L1-L2-L3) : L1, L2 캐시는 코어 내부에, L3 캐시는 코어 외부에 위치한다.
    - 참조 지역성의 원리 
      1. 캐시 메모리는 메모리보다 용량이 작다
      2. 메모리의 모든 내용을 저장할 수 없다.
      3. CPU가 `자주 사용`할만한 내용을 예측하여 저장
      4. CPU는 최근에 접근했던 메모리 공간에 다시 접근하려는 경향이 있다.
      5. CPU는 접근한 메모리 공간 근처를 접근하려는 경향이 있다.(`공간 지역성`)

3. 캐시 히트
    - CPU가 캐시 메모리에 저장된 값을 활용할 경우(예측이 들어맞는 경우)

4. 캐시 미스
    - CPU가 메모리에 접근해야 할 경우(예측이 들어맞지 않는 경우)

5. 캐시 적중률
    - 캐시 히트 횟수 / (캐시 히트 횟수 + 캐시 미스 횟수)
    - 캐시 적중률을 높여야 한다 == CPU가 사용할 법한 데이터를 잘 예측해야한다!
--------------------------------------------------------------------------------------------
